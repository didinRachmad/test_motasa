import{f as r}from"./fetch-DP0ZXCkA.js";const m={initIndex(){console.log("Halaman Sarpras Index berhasil dimuat!");let a;a=$("#datatables");let n=a.data("url");a=a.DataTable({processing:!0,serverSide:!0,ajax:n,columns:[{data:"DT_RowIndex",name:"DT_RowIndex",className:"text-center",orderable:!1,searchable:!1},{data:"kecamatan",name:"kecamatans.nama"},{data:"desa",name:"desas.nama"},{data:"rt_rw",name:"sarpras.rt_rw"},{data:"jenis_sarpras",name:"jenis_sarpras.nama"},{data:"jumlah_tenaga",name:"sarpras.jumlah_tenaga"},{data:"kondisi",name:"sarpras.kondisi"},{data:"kepemilikan",name:"sarpras.kepemilikan"},{data:null,orderable:!1,searchable:!1,className:"text-center",render:function(s,e,t){let i="";return t.can_edit&&(i+=`<a href="${t.edit_url}" class="btn btn-sm btn-warning rounded-4" data-bs-toggle="tooltip" data-bs-title="Edit"><i class="bi bi-pencil-square"></i></a> `),t.can_delete&&(i+=`
                                <form action="${t.delete_url}" method="POST" class="d-inline form-delete">
                                    <input type="hidden" name="_token" value="${$('meta[name="csrf-token"]').attr("content")}">
                                    <input type="hidden" name="_method" value="DELETE">
                                    <button type="button" class="btn btn-sm btn-danger rounded-4 btn-delete" data-bs-toggle="tooltip" data-bs-title="Hapus">
                                        <i class="bi bi-trash-fill"></i>
                                    </button>
                                </form>`),`<div class="d-flex justify-content-center gap-1">${i}</div>`}}],dom:"<'row'<'col-sm-12 col-md-3'l><'col-sm-12 col-md-6 mb-3 mb-md-0 d-flex justify-content-center align-items-center'><'col-sm-12 col-md-3 text-right'f>><'row py-2'<'col-sm-12 table-responsive'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",paging:!0,responsive:!0,pageLength:10,lengthMenu:[[10,50,-1],[10,50,"Semua"]],order:[],columnDefs:[{targets:0,className:"text-center"}],info:!0,language:{sEmptyTable:"Tidak ada data yang tersedia di tabel",sInfo:"Menampilkan _START_ hingga _END_ dari _TOTAL_ entri",sInfoEmpty:"Menampilkan 0 hingga 0 dari 0 entri",sInfoFiltered:"(disaring dari _MAX_ entri keseluruhan)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"Tampilkan _MENU_ entri",sLoadingRecords:"Memuat...",sProcessing:"Sedang memproses...",sSearch:"Cari:",sZeroRecords:"Tidak ditemukan data yang cocok",oAria:{sSortAscending:": aktifkan untuk mengurutkan kolom secara menaik",sSortDescending:": aktifkan untuk mengurutkan kolom secara menurun"}},drawCallback:function(){$('[data-bs-toggle="tooltip"]').each(function(){new bootstrap.Tooltip(this)})}})},initShow(){console.log("Halaman Sarpras Show berhasil dimuat!")},async initCreate(){console.log("Halaman Sarpras Create dimuat");const a=document.getElementById("kecamatan_id"),n=document.getElementById("desa_id"),s=document.getElementById("jenis_sarpras_id");if(a&&n){const e=a.dataset.selected,t=n.dataset.selected;await d(a,e),a.addEventListener("change",()=>{o(n,a.value)}),e&&await o(n,e,t)}if(s){const e=s.dataset.selected;await l(s,e)}},async initEdit(){console.log("Halaman Sarpras Edit dimuat");const a=document.getElementById("kecamatan_id"),n=document.getElementById("desa_id"),s=document.getElementById("jenis_sarpras_id");if(a&&n){const e=a.dataset.selected,t=n.dataset.selected;await d(a,e),a.addEventListener("change",()=>{o(n,a.value)}),e&&await o(n,e,t)}if(s){const e=s.dataset.selected;await l(s,e)}}};async function d(a,n=null){try{const s=await r(window.appRoutes.getKecamatans);Array.from(a.options).forEach(e=>{e.disabled||e.remove()}),s.forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.nama,String(e.id)===String(n)&&(t.selected=!0),a.appendChild(t)})}catch(s){console.error("Gagal load kecamatan:",s)}}async function o(a,n,s=null){if(a.innerHTML='<option value="">-- Pilih Desa --</option>',a.disabled=!0,!!n)try{(await r(window.appRoutes.getDesasByKecamatan(n))).forEach(t=>{const i=document.createElement("option");i.value=t.id,i.textContent=t.nama,String(t.id)===String(s)&&(i.selected=!0),a.appendChild(i)}),a.disabled=!1}catch(e){console.error("Gagal load desa:",e)}}async function l(a,n=null){try{const s=await r(window.appRoutes.getJenisSarpras);Array.from(a.options).forEach(e=>{e.disabled||e.remove()}),s.forEach(e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.nama,String(e.id)===String(n)&&(t.selected=!0),a.appendChild(t)})}catch(s){console.error("Gagal load jenis sarpras:",s)}}export{m as default};
